; PlatformIO Configuration File
; For advanced users who prefer PlatformIO over Arduino IDE
;
; Usage:
;   1. Install PlatformIO extension in VS Code
;   2. Open this folder in VS Code
;   3. PlatformIO will auto-detect the configuration
;   4. Use PlatformIO sidebar to Build/Upload
;
; Documentation: https://docs.platformio.org

[platformio]
; Default environment to build
default_envs = esp32dev
; Source directory - change to test different versions:
;   src/switchbot_simple  = Web server only (START HERE)
;   src/switchbot         = Sinric Pro (Alexa/Google)
;   src/switchbot_blynk   = Blynk mobile app
src_dir = src/switchbot_test

; ============================================================================
; ESP32 Development Board (Most Common)
; ============================================================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Library dependencies
lib_deps =
    madhephaestus/ESP32Servo@^1.1.1
    sinricpro/SinricPro@^3.0.0

; Build flags for optimization
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM=0

; ============================================================================
; ESP32-C3 (Newer, smaller boards)
; ============================================================================
[env:esp32c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200

lib_deps =
    madhephaestus/ESP32Servo@^1.1.1
    sinricpro/SinricPro@^3.0.0

; ============================================================================
; ESP32-S3 (More powerful variant)
; ============================================================================
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

lib_deps =
    madhephaestus/ESP32Servo@^1.1.1
    sinricpro/SinricPro@^3.0.0

; ============================================================================
; WOKWI SIMULATOR (Test without hardware)
; To use: Change src_dir above to "src/switchbot_test", then run Wokwi
; ============================================================================
[env:wokwi]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; Use the test version for simulation (no WiFi required)
lib_deps =
    madhephaestus/ESP32Servo@^1.1.1

; ============================================================================
; Common settings for all environments
; ============================================================================
[env]
; Shared library dependencies
lib_deps =
    madhephaestus/ESP32Servo@^1.1.1

; Monitor settings
monitor_filters =
    default
    esp32_exception_decoder
    time

